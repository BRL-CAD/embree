## Copyright 2009-2022 Intel Corporation
## SPDX-License-Identifier: Apache-2.0

PROJECT(cornell_box)
CMAKE_MINIMUM_REQUIRED(VERSION 3.1.0)

SET(CMAKE_CXX_STANDARD 17)

ADD_EXECUTABLE(cornell_box cornell_box.cpp ../rthwif_production.cpp)

SET_PROPERTY(TARGET cornell_box APPEND PROPERTY COMPILE_FLAGS "-fsycl -fsycl-targets=spir64 -DEMBREE_DPCPP_SUPPORT -DEMBREE_DPCPP_IMPLICIT_DISPATCH_GLOBALS")
SET_PROPERTY(TARGET cornell_box APPEND PROPERTY LINK_FLAGS "-fsycl")

IF (EMBREE_DPCPP_IMPLICIT_DISPATCH_GLOBALS OR NOT DEFINED EMBREE_DPCPP_IMPLICIT_DISPATCH_GLOBALS)

SET(OPTION BUILD_TESTING ON)
INCLUDE(CTest)
ADD_TEST(NAME cornell_box
         COMMAND cornell_box
         WORKING_DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}")

ENDIF()
